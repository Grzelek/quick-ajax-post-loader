!function(a){var t={init:function(){this.qapl_quick_ajax_handlers(),this.qapl_quick_ajax_initial_load()},qapl_quick_ajax_handlers:function(){if("undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper){var t=this;qapl_quick_ajax_helper.helper.load_more_data_button&&a(".quick-ajax-posts-container").on("click",`[data-button="${qapl_quick_ajax_helper.helper.load_more_data_button}"]`,(function(){t.qapl_quick_ajax_handle_ajax(a(this))})),qapl_quick_ajax_helper.helper.filter_data_button&&a(".quick-ajax-filter-container").on("click",`[data-button="${qapl_quick_ajax_helper.helper.filter_data_button}"]`,(function(){t.qapl_quick_ajax_handle_ajax(a(this))})),qapl_quick_ajax_helper.helper.sort_button&&a(".quick-ajax-sort-options-container").on("click",`[data-button="${qapl_quick_ajax_helper.helper.sort_button}"]`,(function(){t.qapl_quick_ajax_handle_ajax(a(this))})),a("body").on("change",'select[name="quick_ajax_sort_option"]',(function(){t.qapl_quick_ajax_handle_sort(a(this))}))}},qapl_quick_ajax_initial_load:function(){var t=a(".qapl-initial-loader");t.length>0&&this.qapl_quick_ajax_handle_ajax(t)},qapl_quick_ajax_handle_ajax:function(t){var e=this;try{var i=JSON.parse(t.attr("data-action")||"{}"),_=JSON.parse(t.attr("data-attributes")||"{}");if("object"!=typeof i||"object"!=typeof _)throw new Error("Quick Ajax Post Loader: Invalid JSON structure")}catch(a){return}var o=t.attr("data-button"),r=_[qapl_quick_ajax_helper.helper.block_id]||"",n=a("#quick-ajax-"+r),l=a("#quick-ajax-"+r+" .quick-ajax-posts-wrapper");n.length&&l.length&&(n.addClass("loading"),t.attr("data-button")!==qapl_quick_ajax_helper.helper.filter_data_button&&t.attr("data-button")!==qapl_quick_ajax_helper.helper.sort_button||l.fadeOut(100,(function(){a(this).empty().fadeIn(100)})),a.ajax({url:qapl_quick_ajax_helper.ajax_url,type:"POST",data:{action:"qapl_quick_ajax_load_posts",nonce:qapl_quick_ajax_helper.nonce,args:i,attributes:_,button_type:o},success:function(a){a&&a.data&&(o===qapl_quick_ajax_helper.helper.load_more_data_button?e.qapl_quick_ajax_load_more_add_posts(l,t,a.data.output):t.attr("data-button")!==qapl_quick_ajax_helper.helper.filter_data_button&&t.attr("data-button")!==qapl_quick_ajax_helper.helper.sort_button||e.qapl_quick_ajax_taxonomy_filter_show_posts(l,t,a.data.output)),n.removeClass("loading")},error:function(a,t,e){n.removeClass("loading")}}))},qapl_quick_ajax_load_more_add_posts:function(t,e,i){e.parent().remove();var _=a(i).hide();t.append(_),_.slideDown((function(){a(this).removeAttr("style")}))},qapl_quick_ajax_taxonomy_filter_show_posts:function(t,e,i){a(`[data-button="${qapl_quick_ajax_helper.helper.filter_data_button}"]`).removeClass("active"),e.addClass("active");var _=a(i).css("opacity","0");t.html(_),_.animate({opacity:1},{duration:400,complete:function(){a(this).removeAttr("style")}})},qapl_quick_ajax_handle_sort:function(t){let e=t.closest(".quick-ajax-sort-options-container").find(".quick-ajax-settings"),i=e.data("attributes");if(!i||!i.quick_ajax_id)return;let _=i.quick_ajax_id,o=a("#quick-ajax-filter-"+_),r=t.val(),[n,l]=r.split("-"),c=e.data("action");if("string"==typeof c&&(c=JSON.parse(c)),c.orderby=n,c.order=l,e.attr("data-action",JSON.stringify(c)),!o.length)return void(e.is("[data-action]")&&e.trigger("click"));o.find(".qapl-filter-button").each((function(){let t=a(this),e=t.data("action");"string"==typeof e&&(e=JSON.parse(e)),e.orderby=n,e.order=l,t.attr("data-action",JSON.stringify(e))}));let u=o.find(".qapl-filter-button.active");u.length?u.trigger("click"):e.is("[data-action]")&&e.trigger("click")}};a(document).ready((function(){t.init()}))}(jQuery);