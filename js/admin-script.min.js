(q=>{var e={init:function(){this.click_and_select_shortcode(),this.click_and_select_all(),this.handle_post_type_change(),this.show_hide_element_on_change(),this.quick_ajax_tabs(),this.copy_code(),this.quick_ajax_function_generator(),this.accordion_block_toggle()},handle_post_type_change:function(){"undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper&&q("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_post_type).length&&q("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_post_type).on("change",function(){var e=q(this).val();q.ajax({url:qapl_quick_ajax_helper.ajax_url,type:"POST",data:{action:"qapl_quick_ajax_get_taxonomies_by_post_type",post_type:e,nonce:qapl_quick_ajax_helper.nonce},success:function(e){var t;e&&e.data?((t=q("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_taxonomy)).empty(),t.append(e.data)):console.error("Quick Ajax Post Loader: Invalid response structure")},error:function(e,t,a){console.error(a)}})})},show_hide_element_on_change:function(){q(".show-hide-element").each(function(){var e=q(this).find("input"),t=e.attr("id");e.change(function(){e.is(":checked")?q('div[data-item="'+t+'"]').removeClass("inactive"):q('div[data-item="'+t+'"]').addClass("inactive")})})},quick_ajax_tabs:function(){if(q(".quick-ajax-tabs").length){let _=q(".quick-ajax-tab-button"),t=q(".quick-ajax-tab-content");_.on("click",function(e){e.preventDefault();e=q(this).data("tab");_.removeClass("active").attr("aria-selected","false").attr("tabindex","-1"),t.removeClass("active").attr("hidden",!0),q(this).addClass("active").attr("aria-selected","true").attr("tabindex","0"),q("#"+e).addClass("active").attr("hidden",!1)}),_.on("keydown",function(e){var t=_.index(this);let a;if("ArrowRight"===e.key)a=(t+1)%_.length;else{if("ArrowLeft"!==e.key)return;a=(t-1+_.length)%_.length}_.eq(a).focus().click()})}},copy_code:function(){q(".copy-button").on("click",function(){var e=q("#"+q(this).data("copy")),t=q("<textarea>").val(e.text()).appendTo("body").select();try{navigator.clipboard.writeText(e.text()).then(()=>{}).catch(e=>{console.error("Quick Ajax - Unable to copy text to clipboard",e)})}finally{t.remove(),q(this).text("Code Copied"),setTimeout(()=>{q(this).text("Copy Code")},2e3)}})},generateId:function(t){let a=0;for(let e=0;e<t.length;e++)a+=t.charCodeAt(e),e%2==0?a+=t.charCodeAt(e):a-=t.charCodeAt(e);return a},getExcludedPostIds:function(e){var e=e.split(/[,\s]+/),t=[];return e.forEach(function(e){/^\d+$/.test(e)&&-1===t.indexOf(e)&&t.push(e)}),t.join(", ")},cleanClassNames:function(e){let t=e.replace(/,/g," ").split(/\s+/);return(t=t.filter((e,t,a)=>!/^\d/.test(e)&&""!==e&&a.indexOf(e)===t)).join(" ")},quick_ajax_function_generator:function(){var d=this;q(".generate-function-button").on("click",function(){for(var t=q(this),e=t.attr("data-output"),a=(t.prop("disabled",!0),q('.copy-button[data-copy="'+e+'"]')),_=(a.prop("disabled",!0),{}),n=(q(".function-generator-wrap input, .function-generator-wrap select, .function-generator-wrap checkbox").each(function(e,t){"checkbox"===t.type?_[t.id]=t.checked?1:0:_[t.id]=q(t).val()}),Object.values(_).join("")),i="",o=(i=(i=i+"$quick_ajax_args = array(\n"+("    'post_type' => '"+_.qapl_select_post_type+"',\n"))+("    'post_status' => '"+_.qapl_select_post_status+"',\n")+("    'posts_per_page' => "+_.qapl_select_posts_per_page+",\n"),"none"!==_.qapl_select_orderby&&(i+="    'orderby' => '"+_.qapl_select_orderby+"',\n"),i+="    'order' => '"+_.qapl_select_order+"',\n",""!==_.qapl_select_post_not_in&&(i+="    'post__not_in' => array("+d.getExcludedPostIds(_.qapl_select_post_not_in)+"),\n"),1===_.qapl_ignore_sticky_posts&&(i+="    'ignore_sticky_posts' => "+_.qapl_ignore_sticky_posts+",\n"),i+=");","undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper&&((l={})[qapl_quick_ajax_helper.quick_ajax_id]=d.generateId(n),1===_.qapl_layout_quick_ajax_css_style&&(l[qapl_quick_ajax_helper.quick_ajax_css_style]=_.qapl_layout_quick_ajax_css_style,l[qapl_quick_ajax_helper.grid_num_columns]=_.qapl_layout_select_columns_qty),_.qapl_layout_quick_ajax_post_item_template&&(c=_.qapl_layout_quick_ajax_post_item_template,l[qapl_quick_ajax_helper.post_item_template]=c),_.qapl_layout_add_taxonomy_filter_class&&""!==_.qapl_layout_add_taxonomy_filter_class&&(c=d.cleanClassNames(_.qapl_layout_add_taxonomy_filter_class),l[qapl_quick_ajax_helper.taxonomy_filter_class]=c),_.qapl_layout_add_container_class&&""!==_.qapl_layout_add_container_class&&(c=d.cleanClassNames(_.qapl_layout_add_container_class),l[qapl_quick_ajax_helper.container_class]=c),1===_.qapl_show_custom_load_more_post_quantity&&(l[qapl_quick_ajax_helper.load_more_posts]=_.qapl_select_custom_load_more_post_quantity),1===_.qapl_override_global_loader_icon)&&(l[qapl_quick_ajax_helper.loader_icon]=_.qapl_loader_icon),""),n=(0<Object.keys(l).length&&(o="",o+="$quick_ajax_attributes = array(\n",Object.entries(l).forEach(([e,t])=>{let a;a=d.quick_ajax_is_numeric(t)?parseInt(t):"string"==typeof t?`'${t}'`:t,o+=`    '${e}' => ${a},
`}),o=o.slice(0,-2)+"\n",o+=");"),null),c="",l="",n=(null!==(n=1===_.qapl_show_select_taxonomy?_.qapl_select_taxonomy:n)&&(c="",c+=`$quick_ajax_taxonomy = '${n}';`,l="",l=(l=(l=(l+="if(function_exists('qapl_quick_ajax_term_filter')):\n")+"    qapl_quick_ajax_term_filter(\n"+"        $quick_ajax_args,\n")+"        $quick_ajax_attributes,\n"+"        $quick_ajax_taxonomy,\n").slice(0,-2)+"\n    );\nendif;"),""),s=(n=(n+="if(function_exists('qapl_quick_ajax_post_grid')):\n")+"   qapl_quick_ajax_post_grid(\n"+"       $quick_ajax_args,\n",""!==o&&(n+="       $quick_ajax_attributes,\n"),n=(n=n.slice(0,-2)+"\n")+"   );\n"+"endif;",""),r=(""!==i.trim()&&(s=(s+="\n// Define AJAX query parameters for '"+_.qapl_select_post_type+"' type posts.\n")+i.trim()+"\n"),""!==o.trim()&&(s=(s+="\n// Define attributes for AJAX.\n")+o.trim()+"\n"),""!==c.trim()&&(s=(s+="\n// Set the taxonomy for filtering posts.\n")+c.trim()+"\n"),""!==l.trim()&&(s=(s+="\n// Render the navigation for '"+_.qapl_select_taxonomy+"' terms.\n")+l.trim()+"\n"),""!==n.trim()&&(s=(s+="\n// Render the grid for '"+_.qapl_select_post_type+"' type posts.\n")+n.trim()+"\n"),q("#"+e)),p=(r.empty(),s.split("\n")),u=0;u<p.length;u++)(e=>{setTimeout(function(){r.append(p[e]+"\n"),e===p.length-1&&(t.prop("disabled",!1),a.prop("disabled",!1))},50*u)})(u)})},quick_ajax_is_numeric:function(e){return/^-?\d+(\.\d+)?$/.test(e)},quick_ajax_color_picker:function(){q(".color-picker-field").wpColorPicker()},quick_ajax_select_text:function(e){var t,a;document.body.createTextRange?((t=document.body.createTextRange()).moveToElementText(e),t.select()):window.getSelection&&(a=window.getSelection(),(t=document.createRange()).selectNodeContents(e),a.removeAllRanges(),a.addRange(t))},click_and_select_shortcode:function(){var e=this;q(".quick-ajax-shortcode").on("click",function(){e.quick_ajax_select_text(this)})},click_and_select_all:function(){var t=this;q(".click-and-select-all").on("click",function(){var e=q(this).find("code").get(0);t.quick_ajax_select_text(e)})},accordion_block_toggle:function(){var e,t=q("#wpbody-content");0<t.find(".quick-ajax-tabs").length&&(e=q("#adminmenuwrap").outerHeight(),t.css("min-height",e)),q(".quick-ajax-accordion-toggle").click(function(){q(this).toggleClass("active").next(".quick-ajax-accordion-content").slideToggle(200)})}};q(document).ready(function(){e.init()})})(jQuery);